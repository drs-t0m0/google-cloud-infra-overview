# Cloud Billing 解説

### Cloud Billingの主な機能

Cloud Billingは、Google Cloud Platform（GCP）の使用料金を管理するためのサービスです。主な機能は以下の通りです。

* **費用の可視化と分析:**
    * 請求レポートや費用の内訳レポートを通じて、GCPの利用料金を詳細に確認できます。
    * プロジェクト、サービス、SKU（Stock Keeping Unit）など、さまざまな切り口で費用をフィルタリング、分析できます。
    * 費用の傾向を把握し、将来の費用を予測するのに役立ちます。
* **予算とアラート:**
    * プロジェクトやアカウントごとに予算を設定し、費用が一定の閾値を超えた場合にアラートを受け取ることができます。
    * プログラムによる予算アラート通知の管理も可能です。
* **費用の最適化:**
    * 確約利用割引（Committed Use Discounts - CUD）を適用することで、継続的な利用が見込まれるワークロードの費用を削減できます。
    * 推奨事項や使用状況の分析情報を提供するFinOpsハブを利用して、費用最適化の機会を見つけられます。
    * ストレージの階層を最適化するなど、具体的なコスト削減のアクションを検討できます。
* **請求と支払い:**
    * 請求書の生成と確認、支払いの管理を行います。
    * 支払い方法の登録や変更が可能です。
    * 請求に関する問題の解決をサポートします。
* **アクセス制御:**
    * Cloud Billingアカウントへのアクセス権限を管理し、セキュリティを確保できます。
* **エクスポート:**
    * Cloud Billingの利用データをBigQueryにエクスポートして、より詳細な分析やカスタムレポートの作成が可能です。

### Cloud Billingの料金

Cloud Billing API自体は無料で利用できます。ただし、GCPの各サービスにはそれぞれの料金体系が設定されています。

* **従量課金制:** 多くのGCPサービスは、実際に使用したリソースに対してのみ料金が発生する従量課金制を採用しています。
* **確約利用割引（CUD）:** 特定の期間（1年または3年）に一定量のリソースを使用することを確約することで、通常料金よりも大幅な割引が適用されます。
* **無料枠:** 新規ユーザーには無料トライアルとして一定のクレジットが付与されるほか、一部のサービスには毎月の無料利用枠が用意されています。
* **料金計算ツール:** GCPの料金計算ツールを利用することで、利用するサービスやリソースに基づいて見積もりを作成できます。
* **料金表:** GCPの各サービスの詳細な料金は、料金リストで確認できます。また、Pricing APIを使用してプログラムから料金情報を取得することも可能です。

### 類似サービスとの比較

他の主要なクラウドプロバイダー（AWS、Azure）も同様の課金・コスト管理サービスを提供しています。

* **AWS Billing and Cost Management:** AWSの利用料金の請求、支払い、コスト管理を行うサービスです。予算設定、コストレポート、コスト最適化の推奨機能などを提供しています。AWSも従量課金制を基本とし、リザーブドインスタンス（Reserved Instances）やSavings Plansといった割引オプションがあります。
* **Azure Cost Management + Billing:** Azureの利用料金の管理、分析、最適化を行うサービスです。予算、アラート、コスト分析レポートなどの機能を提供しています。Azureも従量課金制に加え、Azure ReservationsやAzure Hybrid Benefitなどの割引オプションを用意しています。

**比較のポイント:**

* **料金体系の透明性:** GCPは、秒単位課金など、より細やかな課金体系を採用している場合があります。
* **割引オプション:** 各社、長期利用や一定量の利用に対する割引プログラムを提供しており、割引率や適用条件が異なります。GCPの確約利用割引は、柔軟なコミットメントオプションを提供している点が特徴です。
* **コスト管理ツール:** 各社、予算管理、レポート作成、コスト最適化の推奨機能を提供していますが、ツールの使いやすさや機能の豊富さに違いがあります。GCPのFinOpsハブは、より統合的なコスト管理体験を提供することを目指しています。
* **AIを活用したコスト最適化:** GCPは、AIを活用したインテリジェントな推奨事項を提供し、コスト削減を支援する機能に力を入れています。

### 利用シナリオ

Cloud Billingは、GCPを利用するあらゆるユーザーにとって不可欠なサービスです。具体的な利用シナリオとしては以下のようなものが挙げられます。

* **スタートアップ企業:** 限られた予算内でGCPを利用する際に、予算アラートを設定し、予期せぬ費用の発生を防ぎます。無料枠を最大限に活用し、コスト効率の高い構成を検討します。
* **エンタープライズ企業:** 大規模なGCP環境の費用を部門別、プロジェクト別に管理し、コスト配賦を行います。確約利用割引を活用して、継続的なワークロードのコストを削減します。BigQueryへのエクスポート機能を利用して、詳細な費用分析を行い、コスト最適化の戦略を策定します。
* **開発者:** 開発環境や本番環境のコストを個別に追跡し、予算管理を行います。一時的なリソースの利用状況を監視し、不要なリソースを削減することでコストを最適化します。
* **データサイエンティスト:** 大量のデータを処理する際に発生するCompute EngineやBigQueryの費用を監視し、予算内に収まるようにリソースを調整します。
* **システム管理者:** インフラストラクチャの利用状況を監視し、異常な費用の増加を早期に検知して対応します。

Cloud Billingを理解し、適切に活用することで、GCPの利用料金を最適化し、コスト効率の高いクラウド運用を実現できます。

## 参考

- https://cloud.google.com/billing/docs/concepts?hl=ja
- https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/billing_budget
